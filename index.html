<!DOCTYPE html>
<html>
<head>
    <title>Expense Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Body with embossed-like gradient background */
        body { 
            margin: 0; 
            font-family: Arial, sans-serif; 
            background: linear-gradient(145deg, #e0eafc, #cfdef3); /* soft gradient */
            min-height: 100vh;
            background-image: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.05) 0%, transparent 50%),
                              radial-gradient(circle at 80% 80%, rgba(0,0,0,0.03) 0%, transparent 50%);
            background-blend-mode: overlay;
        }

        /* Main container */
        .container { 
            max-width: 500px; 
            margin: 50px auto; 
            background: rgba(255, 255, 255, 0.95); 
            padding: 20px; 
            border-radius: 12px; 
            box-shadow: 0 8px 20px rgba(0,0,0,0.2); 
        }

        h1 { text-align: center; color: #333; }

        label { display: block; margin-top: 15px; font-weight: bold; color: #444; }

        input, select { 
            width: 100%; 
            padding: 10px; 
            margin-top: 5px; 
            font-size: 16px; 
            box-sizing: border-box; 
            border-radius: 6px; 
            border: 1px solid #ccc;
        }

        button { 
            background-color: #2d89ef; 
            color: white; 
            border: none; 
            border-radius: 8px; 
            padding: 10px; 
            font-size: 16px; 
            cursor: pointer; 
            margin-top: 10px;
            transition: background 0.3s, transform 0.2s, box-shadow 0.2s;
        }

        button:hover { 
            background-color: #1b5fc6; 
            transform: translateY(-2px); 
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .button-row { display: flex; flex-wrap: wrap; justify-content: space-between; margin-top: 15px; gap: 10px; }
        .button-row button { flex: 1; min-width: 80px; }

        .table-container { margin-top: 20px; overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background-color: #2d89ef; color: white; }

        tr:hover { background-color: rgba(45,137,239,0.1); }

        .delete-btn, .edit-btn { color: white; border: none; padding: 5px 8px; cursor: pointer; border-radius: 4px; font-weight: normal; margin-left: 5px; }
        .delete-btn { background: black; }
        .edit-btn { background: orange; }

        /* Category colors */
        .Food { background-color: #ff6b6b; }
        .Travel { background-color: #4ecdc4; }
        .Shopping { background-color: #ffd93d; color: black; }
        .Other { background-color: #6a4c93; color: white; }

        @media (max-width: 600px) {
            .container { margin: 20px; padding: 15px; }
            button { font-size: 14px; padding: 8px; }
        }
    </style>
</head>
<body>
<div class="container">
    <h1>Expense Tracker</h1>

    <!-- Expense Form -->
    <label>Amount</label>
    <input type="number" id="amount" placeholder="Enter amount">

    <label>Category</label>
    <select id="category">
        <option value="">Select category</option>
        <option>Food</option>
        <option>Travel</option>
        <option>Shopping</option>
        <option>Other</option>
    </select>

    <label>Date</label>
    <input type="date" id="date">

    <button id="addBtn" onclick="addExpense()">Add Expense</button>

    <h3 id="total">Total: ₹0</h3>

    <!-- Date Filter Buttons -->
    <div class="button-row">
        <button onclick="setDateFilter('daily')">Daily</button>
        <button onclick="setDateFilter('weekly')">Weekly</button>
        <button onclick="setDateFilter('monthly')">Monthly</button>
        <button onclick="setDateFilter('all')">All</button>
    </div>

    <!-- Category Filter -->
    <label>Filter by Category</label>
    <select id="categoryFilter" onchange="applyFilters()">
        <option value="All">All</option>
        <option>Food</option>
        <option>Travel</option>
        <option>Shopping</option>
        <option>Other</option>
    </select>

    <!-- Summary Table -->
    <div class="table-container" id="summaryTableContainer">
        <table id="summaryTable">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Category</th>
                    <th>Amount (₹)</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<script>
let expenses = JSON.parse(localStorage.getItem("expenses")) || [];
let editId = null;
let currentDateFilter = 'all';

displayExpenses();
updateSummaryTable();

function addExpense() {
    let amount = document.getElementById("amount").value;
    let category = document.getElementById("category").value;
    let date = document.getElementById("date").value;

    if(!amount || !category || !date) { alert("Please fill all fields"); return; }

    if(editId) {
        expenses = expenses.map(exp => exp.id === editId ? {...exp, amount, category, date} : exp);
        editId = null;
        document.getElementById("addBtn").innerText = "Add Expense";
    } else {
        expenses.push({id: Date.now(), amount, category, date});
    }

    saveExpenses();
    applyFilters();

    document.getElementById("amount").value = "";
    document.getElementById("category").value = "";
    document.getElementById("date").value = "";
}

function displayExpenses(list = expenses) {
    let total = list.reduce((sum, exp) => sum + Number(exp.amount), 0);
    document.getElementById("total").innerText = "Total: ₹" + total;
    updateSummaryTable(list);
}

function editExpense(id) {
    let exp = expenses.find(e => e.id === id);
    document.getElementById("amount").value = exp.amount;
    document.getElementById("category").value = exp.category;
    document.getElementById("date").value = exp.date;
    editId = id;
    document.getElementById("addBtn").innerText = "Update Expense";
}

function deleteExpense(id) {
    expenses = expenses.filter(exp => exp.id !== id);
    saveExpenses();
    applyFilters();
}

function saveExpenses() {
    localStorage.setItem("expenses", JSON.stringify(expenses));
}

function setDateFilter(type) {
    currentDateFilter = type;
    applyFilters();
}

function applyFilters() {
    let filtered = [...expenses];
    let today = new Date();
    let currentYear = today.getFullYear();
    let currentMonth = today.getMonth();

    if(currentDateFilter === 'daily') {
        filtered = filtered.filter(exp => new Date(exp.date) <= today);
    } else if(currentDateFilter === 'weekly') {
        let startOfWeek = new Date(today);
        startOfWeek.setDate(today.getDate() - today.getDay());
        let endOfWeek = new Date(startOfWeek);
        endOfWeek.setDate(startOfWeek.getDate() + 6);
        filtered = filtered.filter(exp => {
            let d = new Date(exp.date);
            return d >= startOfWeek && d <= endOfWeek;
        });
    } else if(currentDateFilter === 'monthly') {
        filtered = filtered.filter(exp => {
            let d = new Date(exp.date);
            return d.getFullYear() === currentYear && d.getMonth() === currentMonth;
        });
    }

    let catFilter = document.getElementById("categoryFilter").value;
    if(catFilter !== 'All') filtered = filtered.filter(exp => exp.category === catFilter);

    displayExpenses(filtered);
}

function updateSummaryTable(list = expenses) {
    let tbody = document.querySelector("#summaryTable tbody");
    tbody.innerHTML = "";

    if(list.length === 0) {
        tbody.innerHTML = `<tr><td colspan="4">No expenses to show</td></tr>`;
        return;
    }

    list.forEach(exp => {
        let tr = document.createElement("tr");
        tr.innerHTML = `
            <td>${exp.date}</td>
            <td>${exp.category}</td>
            <td>${exp.amount}</td>
            <td>
                <button class="edit-btn" onclick="editExpense(${exp.id})">Edit</button>
                <button class="delete-btn" onclick="deleteExpense(${exp.id})">X</button>
            </td>
        `;
        tbody.appendChild(tr);
    });
}
</script>
</body>
</html>
